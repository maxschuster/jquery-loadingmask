/*
 * Copyright 2012 Max Schuster 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0
 */
(function(c){var h={message:function(a){this.each(function(){var b=c(this),d=b.data("loadingmask"),e=d.anchor.not(":visible");"string"===typeof a?d.msg.text(a):"object"===typeof a&&d.msg.html(a);e.show();var f=d.msg.outerHeight(),g=d.msg.outerWidth();e.hide();d.msg.animate({top:-1*(f/2)+-1+"px",left:-1*(g/2)+-1+"px"},300,"swing");d.settings.message=a;b.data("loadingmask",d)})}},j={init:function(a){return this.each(function(){var b=c(this);b.data("loadingmask")&&b.loadingmask("destroy");var d=c("<div/>",
{"class":"loadingmask-mask"}),e=c("<div/>",{"class":"loadingmask-msg"}),f=c("<div>",{"class":"loadingmask-anchor"}),g={message:"Waiting...",easing:"linear",duration:"fast"};c.extend(g,a);f.append(e);b.append(d,f).addClass("loadingmask").data("loadingmask",{overlay:d,anchor:f,msg:e,settings:g,isVisible:!1});c.each(g,function(a,c){h[a]&&b.loadingmask("option",a,c)})})},show:function(){return this.each(function(){var a=c(this),b=a.data("loadingmask");b&&!1===a.loadingmask("isVisible")&&(b.overlay.fadeIn(b.settings.duration,
b.settings.easing,function(){a.trigger("show.loadingmask")}),b.anchor.fadeIn(b.settings.duration,b.settings.easing),b.isVisible=!0,a.data("loadingmask",b))})},hide:function(){return this.each(function(){var a=c(this),b=a.data("loadingmask");b&&!0===a.loadingmask("isVisible")&&(b.overlay.fadeOut(b.settings.duration,b.settings.easing,function(){a.trigger("hide.loadingmask")}),b.anchor.fadeOut(b.settings.duration,b.settings.easing),b.isVisible=!1,a.data("loadingmask",b))})},destroy:function(){return this.each(function(){var a=
c(this),b=a.data("loadingmask");b&&(a.trigger("destroy.loadingmask"),a.off(".loadingmask"),b.overlay.remove(),b.anchor.remove(),b.msg.remove(),a.removeData("loadingmask").removeClass("loadingmask"))})},isVisible:function(){var a=!1;this.each(function(){if(!0===c(this).data("loadingmask").isVisible)return a=!0,!1});return a},option:function(a){if(1===arguments.length)return c(this).data("loadingmask").settings[a];if(2===arguments.length){if(h[a])return h[a].apply(this,Array.prototype.slice.call(arguments,
1));this.each(function(b,d){var e=c(this),f=e.data("loadingmask");f.settings[a]=d;e.data("loadingmask",f)})}}};c.fn.loadingmask=function(a){if(j[a])return j[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof a||!a)return j.init.apply(this,arguments);c.error("Method "+a+" does not exist on jQuery.loadingmask")}})(jQuery);